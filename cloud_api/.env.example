# ============================================
# Cloud API Environment Configuration
# ============================================

# ============================================
# Server Configuration
# ============================================

# Server Port
PORT=3000

# Node Environment (development, staging, production)
NODE_ENV=development

# ============================================
# Authentication & Security
# ============================================

# API Key Authentication
# Set REQUIRE_AUTH=true in production and provide a strong API key
# Generate secure key: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
REQUIRE_AUTH=false
API_KEY=your-secret-api-key-here-change-in-production

# ============================================
# Error Tracking & Observability
# ============================================

# Sentry DSN for error tracking and performance monitoring
# Get your DSN from: https://sentry.io/
# Leave empty to disable Sentry
SENTRY_DSN=https://4234c642d17f36dccb8f0deb9f954094@o4510816854343680.ingest.de.sentry.io/4510816857555024

# ============================================
# CORS Configuration
# ============================================

# Comma-separated list of allowed origins (extension IDs)
# Example: chrome-extension://abcdefghijk,chrome-extension://lmnopqrstuv
# Leave empty or set to * for development (allows all origins)
# In production, ALWAYS specify your extension IDs
ALLOWED_ORIGINS=

# ============================================
# Rate Limiting
# ============================================

# Rate limit window in milliseconds (default: 60000 = 1 minute)
RATE_LIMIT_WINDOW_MS=60000

# Maximum requests per window (default: 20)
RATE_LIMIT_MAX_REQUESTS=20

# ============================================
# Redis Configuration (Horizontal Scaling)
# ============================================

# Enable Redis for distributed rate limiting (required for multi-instance deployments)
# Set to true when deploying multiple API instances behind a load balancer
REDIS_ENABLED=false

# Redis connection URL
# Format: redis://[[username]:[password]@][host][:port][/database]
# Examples:
#   redis://localhost:6379                          (local Redis, no auth)
#   redis://:password@redis.example.com:6379        (with password)
#   rediss://:password@redis.example.com:6379       (with TLS, e.g., AWS ElastiCache)
REDIS_URL=

# ============================================
# yt-dlp Configuration
# ============================================

# Timeout for yt-dlp execution in milliseconds (default: 25000 = 25 seconds)
YTDLP_TIMEOUT=25000

# Maximum buffer size for yt-dlp output in bytes (default: 10485760 = 10MB)
YTDLP_MAX_BUFFER=10485760

# ============================================
# Feature Flags
# ============================================

# Enable detailed health endpoint (set to false in production for security)
ENABLE_HEALTH_DETAILS=true

# ============================================
# Production Example Configuration
# ============================================
# Uncomment and modify for production deployment:
#
# PORT=3000
# NODE_ENV=production
# REQUIRE_AUTH=true
# API_KEY=<your-generated-secure-key-here>
# ALLOWED_ORIGINS=chrome-extension://your-extension-id
# RATE_LIMIT_MAX_REQUESTS=10
# ENABLE_HEALTH_DETAILS=false
# ENABLE_METRICS=true
